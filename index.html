
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery UI Slider - Range slider</title>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <!--<link rel="stylesheet" href="/resources/demos/style.css">-->
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
    function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "'");
    }
  $( function() {
    const [name, MINS, MAXS, unit_nameS] = window.location.search.substring(1).split("-");
    const MIN = parseInt(MINS)
    const MAX = parseInt(MAXS)
    const unit_name = unit_nameS || ""
    document.getElementById("range-label").innerHTML=name+":"
    document.getElementById("unit").innerHTML=unit_name

    let displayRange = (a,b) => {if(a != b) return numberWithCommas(a) + " - " + numberWithCommas(b); else return numberWithCommas(a)}

    $( "#slider-range" ).slider({
      range: true,
      min: MIN,
      max: MAX,
      values: [ MIN, MAX ],
      slide: function( event, ui ) {
        $( "#amount" ).val(displayRange(ui.values[0], ui.values[1]));
      }
    });

    $("#amount").val(displayRange($( "#slider-range" ).slider( "values", 0 ), $( "#slider-range" ).slider( "values", 1 )))
      $("#amount").change(e => {
          console.log(e)
          let [min, max] = $("#amount").val().split("-")//FIXME no negative values possible
          if(max == undefined) max = min
          if(max > MAX) max = MAX;
          if(min < MIN) min = MIN;
          console.log(min, max)
          $("#slider-range").slider("values", 0, min)
          $("#slider-range").slider("values", 1, max)
          $("#amount").css("width", $("#amount").val().length + "ch")
      })
    $("#amount").css("width", $("#amount").val().length + "ch")

    $(document.body).css("font-family", "Arial")
    $("#slider-range").css("max-width", "98%")
    $("#slider-range").css("left","0.5%")
    $(".ui-widget-header").css("background-color", "#2196F3");
    $(".ui-slider-handle").css("background-color", "#2196F3");
    $(".ui-slider").css("height", "0.4em");
    $(".ui-slider-handle").css("position", "absolute");
    $(".ui-slider-handle").css("transform", "translate(0%,-0.15em)");
    $(".ui-slider-horizontal").css("background-color", "#9E9E9E");
    $(".ui-corner-all").css("border-radius", "10px");
  } );

  </script>
</head>
<body>

<p>
  <span>
  <label for="amount" id = "range-label"></label>
  <input type="text" id="amount" style="border:0; font-weight:bold;"><span id="unit"></span>
  </span>
</p>
 
<div id="slider-range"></div>
</body>
</html>
